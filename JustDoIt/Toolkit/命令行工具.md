
> 关键词：CLI / shell / bash 

## CLI

命令行界面（英语：command-line interface，缩写：CLI）是**在图形用户界面得到普及之前使用最为广泛的用户界面**，它通常不支持鼠标，用户通过键盘输入指令，计算机接收到指令后，予以执行。 也有人称之为字符用户界面（CUI）。

用户在CLI中输入命令，Shell负责解释和执行这些命令，并将结果返回给用户。CLI和Shell的结合使得用户可以通过命令行来操作计算机系统。

## What is the shell

Unix / Linux shell 是指一种命令行界面，它允许用户输入命令来执行操作，是 Unix 和类 Unix 操作系统（如 Linux 和 macOS）的标准用户界面。Unix shell 可以执行各种命令，如文件操作、进程管理、网络通信等。Unix shell 还提供了一些编程特性，如变量、控制结构（如循环和条件语句）、函数等。

Unix shell 的种类有很多，最常见的有 Bourne shell（sh）、Bourne Again shell（bash）、Korn shell（ksh）、C shell（csh）、zsh 等。不同的 shell 可能在语法、功能和可用性上有所不同。例如，在 Unix 和 Linux 系统中，你可以通过在终端输入 `bash` 来启动 bash shell，然后你可以输入各种命令，如 `ls`，`cd`，`echo`，`sed` 等，来执行相应的操作。

**prompt** 是CLI的一个特性，它在等待用户输入命令时显示一些信息。这些信息通常包括当前用户的用户名、主机名、当前工作目录等，有时也可能包括其他信息，如当前的系统时间、加载情况等。例如，在Unix或Linux系统中，你可能会看到这样的prompt：`[username@hostname ~]$`。在这个例子中，`username`是当前用户的用户名，`hostname`是当前主机的名称，`~`表示当前用户的主目录，`$`是提示符，表示系统正在等待用户输入命令。


## Configuring the Shell

在Unix和Linux系统中，"rc"在配置文件名中的含义源于"run commands" (有时候也说是 "run configuration")。这是一种约定，**用于命名包含启动新shell时运行的命令的脚本文件。** 例如，`~/.zshrc`文件就是Zsh shell启动时会运行的脚本，`~/.bashrc`文件就是bash shell启动时会运行的脚本。这个文件通常包含一些设置环境变量、定义别名、设置shell选项等命令，用于定制用户的shell环境。这种命名约定并不仅限于shell，许多其他的程序（如vim、screen等）也使用以"rc"结尾的文件名来命名它们的配置文件。

Unix 和 Linux 系统的常见惯例是，有一个用于所有用户的 'global' configuration file，以及一个用户主目录中的 'user' configuration file，用户可以编辑该文件以自己个性化设置。The `zsh` shell uses a _~/.zshrc_ file for per-user configuration and _/etc/zsh/zshrc for global configuration.


## Using the shell

### 常用指令

1. `ls`：列出目录中的文件和子目录
    
2. `cd`：改变当前工作目录。
    
3. `pwd`：打印当前工作目录。
    
4. `cp`：复制文件或目录。
    
5. `mv`：移动或重命名文件或目录。
    
6. `rm`：删除文件或目录。
    
7. `cat`：查看文件内容。
    
8. `less`：分页查看文件内容。
    
9. `grep`：在文件中搜索文本。
    
10. `man`：查看命令的帮助手册。
    
11. `chmod`：改变文件或目录的权限。
    
12. `chown`：改变文件或目录的所有者。
    
13. `mkdir`：创建新目录。
    
14. `rmdir`：删除空目录。
    
15. `touch`：创建新文件。
    
16. `echo`：打印文本。
    
17. `history`：查看命令历史。
    
18. `exit`：退出当前 shell。
    
19. `sudo`：以超级用户权限运行命令。
    
20. `ssh`：远程登录到另一台计算机。
    
21. `scp`：在两台计算机之间复制文件。
    
22. `tar`：压缩或解压文件。
    
23. `find`：在文件系统中查找文件。
    
24. `ps`：查看当前进程。
    
25. `kill`：终止进程。
    
26. `top`：查看系统资源使用情况。
    
27. `df`：查看磁盘空间使用情况。
    
28. `du`：查看目录空间使用情况。
    
29. `ln`：创建链接。
    
30. `wget`：从网络下载文件。
    
31. `curl`：发送 HTTP 请求。
    
32. `ping`：测试网络连接。
    
33. `ifconfig`：查看或配置网络接口。
    
34. `netstat`：查看网络连接和统计信息。
    
35. `traceroute`：显示数据包到达目标所经过的路径。
    
36. `sed` ：流编辑器，一次处理一行内容。
    
37. `apropos`：查找与关键字相关的命令。
    
38. `alias`：创建命令的别名。
    
39. `unalias`：删除命令的别名。
    
40. `clear`：清除终端屏幕。


这些指令在 Unix/Linux 系统中非常常用，可以帮助用户完成各种任务。

### 常用符号

在命令行中，有许多特殊的符号和字符，它们有特定的含义。以下是一些常用的符号：

1. `|`  管道符号
	将左边的命令的输出作为右边命令的输入。
	`ls | grep ".txt"` 会列出当前目录下的所有文本文件。
    
2. `>`  重定向符号
	将命令的输出写入到文件中。
	`echo "Hello, World" > hello.txt` 会将 "Hello, World" 写入到 hello.txt 文件中。
    
3. `>>`  追加重定向符号
	将命令的输出追加到文件中。
	`echo "Hello, World" >> hello.txt` 会将 "Hello, World" 追加到 hello.txt 文件中。
    
4. `<`  输入重定向符号
	将文件的内容作为命令的输入。
	`wc -l < hello.txt` 会统计 hello.txt 文件中的行数。
    
5. `;`  分号
	允许在同一行中运行多个命令。
	`echo "Hello, World"; ls` 会先打印 "Hello, World"，然后列出当前目录下的所有文件。
    
6. `&`  后台运行符号
	允许在后台运行命令。
	`sleep 10 &` 会让 sleep 命令在后台运行，不会阻塞终端。
    
7. `&&`  逻辑与符号
	只有在前面的命令成功执行后，才会执行后面的命令。
	`ls && echo "Success"` 会先列出当前目录下的所有文件，然后打印 "Success"。
    
8. `||`  逻辑或符号
	只有在前面的命令失败后，才会执行后面的命令。
	`ls || echo "Failed"` 会先尝试列出当前目录下的所有文件，如果失败（例如，当前目录不存在），则打印 "Failed"。
    
9. `*`  通配符
	匹配任意0个或多个字符。
	`ls *.txt` 会列出当前目录下所有以 .txt 结尾的文件。
    
10. `?`  通配符
	匹配任意单个字符。
	`ls ?.txt` 会列出当前目录下所有以任意单个字符开头，以 .txt 结尾的文件。
    
11. `[]`  字符集
	匹配括号内的任意单个字符。
	`ls [abc].txt` 会列出当前目录下所有以 a、b 或 c 开头，以 .txt 结尾的文件。
    
12. `{}`  大括号
	用于批量处理。
	`touch file{1..10}.txt` 会创建 10 个名为 file1.txt 到 file10.txt 的文件。
    
13. `#`  注释符号
	用于在命令行中添加注释。
	`# This is a comment` 是一个注释。
    
14. `$`  变量符号
	用于引用变量的值。
	`echo $HOME` 会打印当前用户的主目录。
    
15. `()`  子shell
	用于创建一个新的 shell 来执行命令。
	`(cd /tmp; ls)` 会先切换到 /tmp 目录，然后列出该目录下的所有文件。
    
16. `''`  单引号
	用于禁止变量替换。
	`echo '$HOME'` 会打印 `$HOME`，而不是主目录的路径。
    
17. `""`  双引号
	用于允许变量替换。
	`echo "$HOME"` 会打印主目录的路径。
    
18. `\`  转义符号
	用于转义特殊字符。
	`echo "Hello\nWorld"` 会打印 "Hello" 和 "World" 在两行。
    
19. `~`  主目录符号
	表示当前用户的主目录。
	`cd ~` 会切换到当前用户的主目录。
    
20. `.`  当前目录符号
	表示当前目录。
	`cd .` 会保持在当前目录。
    
21. `..`  父目录符号
	表示当前目录的父目录。
	`cd ..` 会切换到当前目录的父目录。

### 详解

**sed**

`sed -i -e 's/foo/bar/' filename` 将所有的 "foo" 替换为 "bar"。
- `-i` 选项是 sed 的一个选项，它允许直接修改文件。默认情况下，sed 会将处理结果输出到标准输出，而不会修改原始文件。-i 选项会直接修改原始文件。
- `-e` 选项是 sed 的一个选项，它允许在命令行上指定多个编辑命令。每个编辑命令都需要使用 -e 选项来指定。`
- `'s/foo/bar/'` 是编辑命令，s 是 sed 的替换命令。

